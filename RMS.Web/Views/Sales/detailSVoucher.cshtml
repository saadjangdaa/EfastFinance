@model RMS.Web.Models.ViewModels.VoucherMasterViewModel

@{
    ViewBag.Title = "detailSVoucher";
}

<div class="container-fluid">
    <div class="card shadow mb-4">
        <div class="card-header py-3" style="background-color:#5a5c69">
            <a id="btnback" class="btn btn-success">Back</a>
            @*<button type="button" id="backbtn" class="btn btn-success">Back</button>*@
            @if (Model.vouchertypeid == 1 || Model.vouchertypeid == 9)
            {
                <h4 class="m-0 text-center font-weight-bold"><strong style="color:white;">Sales Voucher Details</strong></h4>

            }
            else if (Model.vouchertypeid == 2 || Model.vouchertypeid == 10)
            {
                <h4 class="m-0 text-center font-weight-bold"><strong style="color:white;">Purhcase Voucher Details</strong></h4>

            }
            else if (Model.vouchertypeid == 12)
            {
                <h4 class="m-0 text-center font-weight-bold"><strong style="color:white;">StockTransfer Voucher Details</strong></h4>

            }
            else if (Model.vouchertypeid == 13)
            {
                <h4 class="m-0 text-center font-weight-bold"><strong style="color:white;">Recieve Form Details</strong></h4>

            }
        </div>
        @if (Model.vouchertypeid == 1 || Model.vouchertypeid == 2 || Model.vouchertypeid == 9 || Model.vouchertypeid == 10)
        {
            <div class="card-body">

                <lablel class="col-md-2" style="color:black">Voucher Number</lablel>
                <div class="col-md-4">
                    <input class="form-control" name="VoucherNumber" readonly="readonly" type="number" value="@ViewBag.vouchernumber" />
                </div>

                <lablel class="col-md-2" style="color:black">Voucher Date</lablel>
                <div class="col-md-4">
                    <input class="form-control" id="VoucherCreateDate" value="@ViewBag.VoucherCreateDate" name="VoucherCreateDate" readonly="readonly" />
                </div>

                <!---->
                <br />
                <br />
                <lablel class="col-md-2" style="color:black">Party Name</lablel>
                <div class="col-md-4">
                    @Html.DropDownList("Partyid", (IEnumerable<SelectListItem>)ViewBag.Accountname, "---Select PartyName---", htmlAttributes: new { @class = "form-control", @Id = "Partyid_Accountid", @Name = "Partyid", @disabled = "true" })
                </div>



                <lablel class="col-md-2" style="color:black">Material Centre</lablel>
                <div class="col-md-4">

                    @Html.DropDownList("LocationID", (IEnumerable<SelectListItem>)ViewBag.MaterialCentres, "---Select Location---", htmlAttributes: new { @class = " form-control ", @Id = "LocationID", @Value = Model.LocationID, @disabled = "true" })



                </div>
                <br />
                <br />
                <lablel class="col-md-2" style="color:black">
                    Curr Balance:
                    @*<em style="color:blue" id="balance"></em>*@
                </lablel>
                <div class="col-md-4">

                    <input type="text" disabled style="color:blue" id="balance" class="form-control" />
                </div>
                <lablel class="col-md-2" style="color:black">Narration</lablel>
                <div class="col-md-4">
                    <input class="form-control" readonly="readonly" id="Narration" name="Narration" value="@ViewBag.Narration" placeholder="Enter Voucher Narration" />
                </div>


                <br />
                <br />




            </div>
        }
        else if (Model.vouchertypeid == 12 || Model.vouchertypeid == 13)
        {
            <div class="card-body">

                <lablel class="col-md-2" style="color:black">Voucher Number</lablel>
                <div class="col-md-4">
                    <input class="form-control" name="VoucherNumber" readonly="readonly" type="number" value="@ViewBag.vouchernumber" />
                </div>

                <lablel class="col-md-2" style="color:black">Voucher Date</lablel>
                <div class="col-md-4">
                    <input class="form-control" id="VoucherCreateDate" value="@ViewBag.VoucherCreateDate" name="VoucherCreateDate" readonly="readonly" />
                </div>

                <!---->
                <br />
                <br />
                <lablel class="col-md-2" style="color:black">Party Name</lablel>
                <div class="col-md-4">
                    @Html.DropDownList("Partyid", (IEnumerable<SelectListItem>)ViewBag.Accountname, "---Select PartyName---", htmlAttributes: new { @class = "form-control", @Id = "Partyid_Accountid", @Name = "Partyid", @disabled = "true" })
                </div>



                <lablel class="col-md-2" style="color:black">Narration</lablel>
                <div class="col-md-4">
                    <input class="form-control" readonly="readonly" id="Narration" name="Narration" value="@ViewBag.Narration" placeholder="Enter Voucher Narration" />
                </div>


                <br />
                <br />
                <lablel class="col-md-2" style="color:black">From Centre</lablel>
                <div class="col-md-4">

                    @Html.DropDownList("LocationID", (IEnumerable<SelectListItem>)ViewBag.MaterialCentres, "---Select Location---", htmlAttributes: new { @class = " form-control ", @Id = "LocationID", @Value = Model.LocationID, @disabled = "true" })



                </div>

                <lablel class="col-md-2" style="color:black">To </lablel>
                <div class="col-md-4">
                    @Html.DropDownList("LocationID2", (IEnumerable<SelectListItem>)ViewBag.MaterialCentres2, "---Select Location---", htmlAttributes: new { @class = " form-control ", @Id = "LocationID2", @Value = Model.LocationID2, @disabled = "true" })

                </div>

                <br />
                <br />




            </div>
        }

    </div>
</div>

<div class="container-fluid">
    <div class="card shadow mb-4">
        <div class="card-header py-3" style="background-color:#5a5c69">

            <h4 class="m-0 font-weight-bold"><strong style="color:white;">Item Details </strong></h4>

            @*<h6 class="m-0 font-weight-bold"><strong style="color:white;">Bill Sundry</strong></h6>*@
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered " width="100%" cellspacing="0">
                    <thead class="thead-dark">
                        <tr>
                            <th style="color:white;">Item Name</th>
                            <th style="color:white;">Quantity</th>
                            <th style="color:white;">Unit</th>
                            @if (Model.vouchertypeid == 12)
                            {
                                <th style="color:white;">Con Factor</th>
                                <th style="color:white;">Carrieir Rates</th>
                                <th style="color:white;">Total Amount </th>

                            }
                            else if (Model.vouchertypeid == 13)
                            {
                                <th hidden></th>
                                <th hidden></th>
                                <th hidden></th>

                            }
                            else
                            {
                                <th style="color:white;">Price</th>
                                <th style="color:white;">Amount</th>

                            }
                        </tr>

                    </thead>
                    @*<tfoot style="background-color:lightgreen">
            <tr>
                <th>@Html.DropDownList("itemname", (IEnumerable<SelectListItem>)ViewBag.Items, "---Select Item---", htmlAttributes: new { @class = "form-control", @Id = "itemname" })</th>
                <th><input class="form-control" type="number" id="Quantity" placeholder="Enter Quantity" /></th>
                <th>@Html.DropDownList("unitname", (IEnumerable<SelectListItem>)ViewBag.Units, "---Select Unit---", htmlAttributes: new { @class = "form-control", @Id = "unitname", })</th>
                <th><input class="form-control" type="number" placeholder="item Price" id="ItemPrice" /></th>
                <th><input class="form-control" readonly="readonly" placeholder="total Amount" id="txttotal" /></th>
                <th><button type="button" class="btn btn-success " id="btnadd"><i class="glyphicon glyphicon-plus"></i></button></th>
            </tr>
        </tfoot>*@


                    <tbody style="">
                        @foreach (var item in Model.VoucherChildlist)
                        {
                            var confactor = item.TotalAmount / item.ItemPrice;
                        <tr>
                            <td hidden>@item.ItemID</td>
                            <td>@item.Items.ItemName</td>
                            <td>@item.Quantity</td>
                            <td hidden>@item.Unitid</td>
                            <td>@item.Units.UnitName</td>
                            @if (Model.vouchertypeid == 12)
                            {
                                <td>@confactor</td>
                                <td>@item.ItemPrice</td>
                                <td>@item.TotalAmount</td>
                            }
                            else if (Model.vouchertypeid == 13)
                            {
                                <td hidden></td>
                                <td hidden></td>
                                <td hidden></td>

                            }
                            else
                            {
                                <td>@item.ItemPrice</td>
                                <td>@item.TotalAmount</td>
                            }
                            <td hidden>@item.TotalAmount</td>


                        </tr>


                        }

                    </tbody>
                    @if (Model.vouchertypeid == 12 )
                    {
                        <tfoot class="thead-dark">
                            <tr>
                                <th hidden="">1</th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th>Final Total</th>
                                <th>
                                    <input value="@Model.FinalTotal"  class="form-control font-weight-bolder " id="txtfinaltotal" name="FinalTotal" readonly="readonly" >


                                </th>
                            </tr>
                        </tfoot>
                    }
                    </table>

            </div>
        </div>
    </div>

</div>
@if (Model.vouchertypeid == 12 || Model.vouchertypeid == 13)
{
    <div></div>
}
else
{
    <div class="row container-fluid">
        <div class="col-md-6">

            <div class="card shadow mb-4">



                <div class="card-header py-3" style="background-color:#5a5c69">

                    <h6 class="m-0 font-weight-bold"><strong style="color:white;">Bill Sundry</strong></h6>
                </div>


                <div class="card-body" style="background-color:white">

                    <div class="table-responsive">
                        <table class="table table-bordered table-dark" width="100%" cellspacing="0">
                            <thead style="background-color:yellowgreen">
                                <tr>
                                    <th>BillSundry Name</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>

                            @*<thead style="background-color:orange">

                                    <tr>
                                        <th>
                                            @Html.DropDownList("BillSudfdfndryId22", (IEnumerable<SelectListItem>)ViewBag.BillSundry, "---Select BillSundry---", htmlAttributes: new { @class = "form-control", @Id = "txbillsundry" })

                                        </th>
                                        <th><input class="form-control" type="number" placeholder="Enter Amount" id="BillSundryAmount" /></th>
                                        <th><button type="button" class="btn btn-success " id="btnaddbillsundry"><i class="glyphicon glyphicon-plus"></i></button></th>


                                    </tr>
                                </thead>*@
                            @if (Model.modify == 1 && Model.BillSundrychildlist != null)
                            {
                                int rowid = 1;
                                <tbody id="billsundry" style="color:yellowgreen;">
                                    @foreach (var item2 in Model.BillSundrychildlist)
                                    {

                                        <tr id="billsundryrows" style="color:grey;">
                                            <td hidden>@item2.BillSundryChildID</td>
                                            <td style="color:white;">@item2.BillSundry.BillSundryName</td>
                                            <td style="color:white;">@item2.BillSundryAmount</td>
                                        </tr>
                                        rowid = rowid + 1;
                                    }
                                </tbody>

                            }
                            else
                            {
                                <tbody id="billsundry"></tbody>

                            }
                        </table>
                    </div>



                </div>

                @*<div class="card-body" style="background-color:white">

                        <div class="table-responsive">
                            <table class="table table-bordered" id="billsundrytable" cellspacing="0">
                                <thead class="thead-dark" style="background-color:lightgreen">
                                    <tr>
                                        <th>BillSundry Name</th>
                                        <th>Amount</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <thead style="background-color:orange">

                                    <tr>
                                        <th>
                                            @Html.DropDownList("BildlSudfdndryId", (IEnumerable<SelectListItem>)ViewBag.BillSundry, "---Select BillSundry---", htmlAttributes: new { @class = "form-control", @Id = "txbillsundry" })

                                        </th>
                                        <th><input class="form-control" type="number" placeholder="Enter Amount" id="BillSundryAmount" /></th>
                                        <th><button type="button" class="btn btn-success " id="btnaddbillsundry"><i class="glyphicon glyphicon-plus"></i></button></th>


                                    </tr>
                                </thead>
                                <tbody id="billsundry"></tbody>


                            </table>
                        </div>



                    </div>*@

            </div>
        </div>
        <div class="col-md-6">

            <div class="card shadow mb-4">
                <div class="card-header py-3" style="background-color:#5a5c69">

                    <h6 class="m-0 font-weight-bold"><strong style="color:white;">Total</strong></h6>
                </div>
                <div class="card-body" style="background-color:white">
                    <lablel class="col-md-4" style="color:black;">Final Total</lablel>
                    <div class="col-md-8">
                        @Html.TextBox("FinalTotal", Model.FinalTotal, new { @class = "form-control", @Id = "txtfinaltotal", @name = "FinalTotal", @readonly = "readonly" })

                    </div>
                    <br />
                    <br />

                    @*<label class="col-md-4" style="color:black;">Another Discount Value</label>
                        <div class="col-md-8">
                            <input class="form-control" id="txtdiscount2" placeholder="Enter second Discount Rate" value="0.00" />
                        </div>*@

                    <lablel class="col-md-4"></lablel>
                    <div class="col-md-8">

                    </div>
                </div>
            </div>
        </div>
    </div>
}

<script>
    $('#btnback').click(function () {
        debugger;

        window.history.back();
    });




</script>
